CREATE TABLE IF NOT EXISTS Employee (
	emp_id INT AUTO_INCREMENT NOT NULL,
	first_name VARCHAR(45) NOT NULL,
	last_name VARCHAR(45) NOT NULL,
	birth_day DATETIME NOT NULL,
	salary INT NOT NULL,
	manager_id INT UNIQUE NOT NULL,
	branch_id INT NOT NULL,
	PRIMARY KEY (emp_id)
);

CREATE TABLE IF NOT EXISTS Branch (
	branch_id INT AUTO_INCREMENT NOT NULL,
	branch_name VARCHAR(255) UNIQUE NOT NULL,
	mgr_id INT FOREIGN KEY REFERENCES Employee(manager_id) ON DELETE SET NULL,
	PRIMARY KEY (branch_id)
);

ALTER TABLE Employee
ALTER COLUMN branch_id INT FOREIGN KEY REFERENCES Branch(branch_id) ON DELETE SET NULL;

ALTER TABLE Employee
ALTER COLUMN manager_id INT FOREIGN KEY REFERENCES Employee(emp_id) ON DELETE SET NULL;

ALTER TABLE Employee
ADD FOREIGN KEY (branch_id) REFERENCES Branch(branch_id) ON DELETE SET NULL;

INSERT INTO Employee(emp_id, first_name, last_name, birth_day, salary, manager_id, branch_id)
VALUES (100, David, Wallace, 1967-11-17, 250000, NULL, NULL);

INSERT INTO Branch(branch_id, branch_name, mgr_id)
VALUES (1, Corporate, 100);

UPDATE Employee
SET branch_id = 1
WHERE emp_id = 100;
