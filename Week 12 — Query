-- HAYLEY JOLLIFFE
-- Week 12

USE northwind_w12

-- Step 01
DROP TRIGGER IF EXISTS northwind_w12.monitor_shippers;

DELIMITER $$

-- Set log table
CREATE TABLE IF NOT EXISTS log_monitor_shippers (
    `ShipperID` INT NOT NULL,
    `CompanyName` VARCHAR(40) NOT NULL,
    `Phone` VARCHAR(24) DEFAULT NULL,
    `UpdateDate` = TIME,
    `ActionType` = VARCHAR(40)
);

-- Start trigger
CREATE TRIGGER monitor_shippers
AFTER UPDATE
ON Shippers FOR EACH ROW
SET
ShipperID = NEW.ShipperID,
CompanyName = NEW.CompanyName,
Phone = NEW.Phone,
UpdateDate = NOW();
ActionType = 'Update';
INSERT INTO log_monitor_shippers(ShipperID, CompanyName, Phone, UpdateDate, ActionType)
VALUES (NEW.ShipperID, NEW.CompanyName, NEW.Phone, NEW.UpdateDate, ActionType);

END $$

DELIMITER ;

-- Step 02

-- Step 03

-- Step 04

-- Step 05
